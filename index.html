<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title><^> fly to the sun</title>
  <!-- Favicon: simple white triangle -->
  <link rel="icon" href="data:image/svg+xml,
  <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
    <polygon points='50,10 10,90 90,90' fill='white'/>
  </svg>">
  <style>
    :root { --bg:#0a0a0a; --fg:#eaeaea; }
    html, body { margin:0; height:100%; background:var(--bg); color:var(--fg); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; overflow:hidden; }
    * { cursor:none !important; }

    /* Fixed nav in top-left (scaled down) */
    .wrap { position:fixed; top:1vh; left:1vw; display:flex; flex-direction:column; gap:0.5rem; z-index:1000; }
    a.nav { text-decoration:none; color:var(--fg); font-size:clamp(2rem,4vw,4rem); line-height:1; }
    a.nav:hover { color:var(--fg); }

    /* Triangle cursor (scaled down) */
    #custom-cursor { position:fixed; top:0; left:0; width:16px; height:16px; pointer-events:none; z-index:9999; clip-path:polygon(50% 0%, 0% 100%, 100% 100%); background:#fff; mix-blend-mode:difference; }

    /* WORLD: 2 screens wide */
    .world { position:absolute; top:0; left:0; width:200vw; height:100vh; display:flex; will-change:transform; }
    .main-area { width:100vw; height:100vh; }

    .hidden-page { width:100vw; height:100vh; display:grid; place-items:center; background:#000; }
    /* Simple yellow circle (scaled down) */
    .sun { width:110px; height:110px; border-radius:50%; background: #ffd400; cursor:pointer; }

    /* Bird (scaled down) */
    #bird { position:fixed; width:20px; height:20px; z-index:500; pointer-events:none; }
  </style>
</head>
<body>
  <!-- Fixed navigation -->
  <div class="wrap" role="navigation" aria-label="Main">
    <a class="nav" href="jack-van-thyne.html">JACK VAN THYNE</a>
    <a class="nav" href="archives.html">ARCHIVES</a>
    <a class="nav" href="art.html">DIGITAL GALLERY</a>
  </div>

  <!-- World with hidden page to the right -->
  <div class="world" id="world">
    <div class="main-area"></div>
    <div class="hidden-page">
      <div class="sun" id="sun" title="Click to fly"></div>
    </div>
  </div>

  <!-- Bird & custom cursor -->
  <img id="bird" src="bird.png" alt="bird" />
  <div id="custom-cursor"></div>

  <script>
    const cursor = document.getElementById('custom-cursor');
    const bird = document.getElementById('bird');
    const world = document.getElementById('world');
    const sun = document.getElementById('sun');

    // Cursor follow
    document.addEventListener('mousemove', (e) => {
      cursor.style.transform = `translate(${e.clientX - 8}px, ${e.clientY - 4}px)`;
    });

    // Movement state
    let birdX = Math.round(window.innerWidth * 0.6);
    let birdY = Math.round(window.innerHeight * 0.5);
    const step = 13; // px per key press frame (50% of original)
    const birdSize = 20; // scaled down

    // World sliding when pushing right edge
    let offsetX = 0;
    const maxOffset = () => Math.max(0, world.scrollWidth - window.innerWidth);

    const keys = { ArrowUp:false, ArrowDown:false, ArrowLeft:false, ArrowRight:false };
    addEventListener('keydown', (e) => { if (e.key in keys) { keys[e.key] = true; e.preventDefault(); } }, {passive:false});
    addEventListener('keyup', (e) => { if (e.key in keys) keys[e.key] = false; });

    function clamp(v,min,max){ return v<min?min:v>max?max:v; }

    function tick(){
      let moved = false;
      if (keys.ArrowLeft){
        if (offsetX > 0) { offsetX = Math.max(0, offsetX - step); moved = true; }
        else if (birdX > 0) { birdX = Math.max(0, birdX - step); moved = true; }
      }
      if (keys.ArrowRight){
        const atRightEdge = birdX >= (window.innerWidth - birdSize);
        if (!atRightEdge) { birdX = Math.min(window.innerWidth - birdSize, birdX + step); moved = true; }
        else if (offsetX < maxOffset()) { offsetX = Math.min(maxOffset(), offsetX + step); moved = true; }
      }
      if (keys.ArrowUp){ birdY = Math.max(0, birdY - step); moved = true; }
      if (keys.ArrowDown){ birdY = Math.min(window.innerHeight - birdSize, birdY + step); moved = true; }

      if (moved){
        bird.style.transform = `translate(${birdX}px, ${birdY}px)`;
        world.style.transform = `translateX(${-offsetX}px)`;
      }
      requestAnimationFrame(tick);
    }

    bird.style.transform = `translate(${birdX}px, ${birdY}px)`;
    world.style.transform = `translateX(0)`;
    requestAnimationFrame(tick);

    sun.addEventListener('click', () => {
      window.open("https://jackvanthyne.org/clue_001.html", "_blank");
    });

    addEventListener('resize', () => {
      birdX = clamp(birdX, 0, window.innerWidth - birdSize);
      birdY = clamp(birdY, 0, window.innerHeight - birdSize);
      offsetX = clamp(offsetX, 0, maxOffset());
      bird.style.transform = `translate(${birdX}px, ${birdY}px)`;
      world.style.transform = `translateX(${-offsetX}px)`;
    });

    bird.onerror = () => {
      bird.style.background = 'white';
      bird.style.clipPath = 'polygon(0% 100%, 50% 0%, 100% 100%)';
      bird.removeAttribute('src');
    };
  </script>
</body>
</html>
