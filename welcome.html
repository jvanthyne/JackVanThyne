<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hidden Wireframe Earth</title>
  <style>
    :root { --bg:#0a0a0a; --fg:#eaeaea; }
    html, body { margin:0; height:100%; background:var(--bg); color:var(--fg); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; overflow:hidden; }
    * { cursor:none !important; }

    /* Fixed nav (moves out of frame when revealing) */
    .wrap { position:fixed; top:2vh; left:2vw; display:flex; flex-direction:column; gap:1rem; z-index:1000; transition: transform 600ms cubic-bezier(.22,.61,.36,1), opacity 600ms ease; }
    body.reveal .wrap { transform: translateX(-60vw); opacity: 0; }
    a.nav { text-decoration:none; color:var(--fg); font-size:clamp(4rem,8vw,8rem); line-height:1; }
    a.nav:hover { color:var(--fg); }

    /* Triangle cursor */
    #custom-cursor { position:fixed; top:0; left:0; width:32px; height:32px; pointer-events:none; z-index:9999; clip-path:polygon(50% 0%, 0% 100%, 100% 100%); background:#fff; mix-blend-mode:difference; }

    /* WORLD: 2 screens wide; we move this with translateX */
    .world { position:absolute; inset:0 auto 0 0; width:200vw; height:100vh; display:flex; will-change:transform; }
    .main-area { width:100vw; height:100vh; }

    .hidden-page { width:100vw; height:100vh; display:grid; place-items:center; background: radial-gradient(1000px 600px at 60% 40%, #060e18 0%, #000 70%); position:relative; overflow:hidden; }

    /* Cooler, simpler wireframe globe */
    .globe { width:min(50vmin, 420px); aspect-ratio:1; position:relative; display:grid; place-items:center; filter: drop-shadow(0 0 18px rgba(120,220,255,.18)); }
    .globe-tilt { transform: rotateX(18deg) rotateZ(-8deg); transform-style:preserve-3d; }
    .globe-spin { animation: spin 36s linear infinite; }
    @keyframes spin { to { transform: rotateY(360deg); } }

    .glow { position:absolute; inset:0; border-radius:50%; background: radial-gradient(45% 45% at 35% 30%, rgba(120,220,255,.18), transparent 60%), radial-gradient(120% 120% at 50% 50%, rgba(0,40,80,.9) 0%, rgba(0,0,0,1) 70%); mix-blend-mode:screen; pointer-events:none; }
    .ring { position:absolute; inset:-6% -6% 0 -6%; transform: rotateX(75deg); border-radius:50%; box-shadow: 0 0 0 1px rgba(150,220,255,.12) inset; filter: blur(0.5px) drop-shadow(0 0 10px rgba(140,220,255,.08)); pointer-events:none; }

    /* Wireframe via SVG strokes */
    .globe svg { width:100%; height:auto; display:block; }
    .stroke { stroke: rgba(180,230,255,.32); stroke-width:0.8; fill:none; }

    /* Swarm of tiny birds orbiting the globe */
    .swarm { position:absolute; width: min(60vmin, 480px); aspect-ratio:1; display:grid; place-items:center; pointer-events:none; }
    .orbit { position:absolute; inset:0; animation: orbit linear infinite; }
    @keyframes orbit { to { transform: rotate(360deg); } }
    .dot, .tri { position:absolute; left:50%; top:50%; transform-origin: 0 0; opacity:.9; }
    .dot { width:3px; height:3px; background:#eaf6ff; border-radius:50%; filter: drop-shadow(0 0 2px rgba(200,255,255,.35)); animation: flutter 2.6s ease-in-out infinite alternate; }
    .tri { width:0; height:0; border-left:3px solid transparent; border-right:3px solid transparent; border-bottom:5px solid #e7faff; filter: drop-shadow(0 0 2px rgba(200,255,255,.35)); animation: flutter 2.2s ease-in-out infinite alternate; }
    @keyframes flutter { from { transform: translate(calc(50% + var(--r,120px)), 50%) rotate(-8deg) scale(1); } to { transform: translate(calc(50% + var(--r,120px)), 50%) rotate(8deg) scale(1.12); } }

    /* Bird controlled by arrows (eased, natural) */
    #bird { position:fixed; width:40px; height:40px; z-index:500; pointer-events:none; }
  </style>
</head>
<body>
  <!-- Fixed navigation -->
  <div class="wrap" role="navigation" aria-label="Main">
    <a class="nav" href="jack-van-thyne.html">JACK VAN THYNE</a>
    <a class="nav" href="vt-design-build.html">VT DESIGN BUILD</a>
    <a class="nav" href="archive.html">ARCHIVE</a>
    <a class="nav" href="products.html">PRODUCTS</a>
    <a class="nav" href="works.html">WORKS</a>
    <a class="nav" href="art.html">ART</a>
  </div>

  <!-- World with hidden page to the right -->
  <div class="world" id="world">
    <div class="main-area"></div>
    <div class="hidden-page">
      <div class="globe">
        <div class="glow"></div>
        <div class="ring"></div>
        <div class="globe-tilt">
          <div class="globe-spin">
            <!-- Minimal wireframe using SVG: denser latitudes + meridians -->
            <svg viewBox="-50 -50 100 100" aria-hidden="true">
              <circle class="stroke" r="49"/>
              <!-- latitudes -->
              <ellipse class="stroke" rx="49" ry="40"/>
              <ellipse class="stroke" rx="49" ry="30"/>
              <ellipse class="stroke" rx="49" ry="20"/>
              <ellipse class="stroke" rx="49" ry="10"/>
              <!-- meridians -->
              <circle class="stroke" r="49" transform="rotate(15) skewX(40)"/>
              <circle class="stroke" r="49" transform="rotate(45) skewX(20)"/>
              <circle class="stroke" r="49" transform="rotate(75) skewX(10)"/>
              <circle class="stroke" r="49" transform="rotate(-15) skewX(-40)"/>
              <circle class="stroke" r="49" transform="rotate(-45) skewX(-20)"/>
              <circle class="stroke" r="49" transform="rotate(-75) skewX(-10)"/>
            </svg>
          </div>
        </div>
      </div>
      <!-- orbiting birds around the globe -->
      <div class="swarm" id="swarm"></div>
    </div>
      <!-- orbiting birds around the globe -->
      <div class="swarm" id="swarm"></div>
    </div>
  </div>

  <!-- Bird & custom cursor -->
  <img id="bird" src="bird.png" alt="bird" />
  <div id="custom-cursor"></div>

  <script>
    const cursor = document.getElementById('custom-cursor');
    const bird = document.getElementById('bird');
    const world = document.getElementById('world');
    const swarm = document.getElementById('swarm');

    // Cursor follow
    document.addEventListener('mousemove', (e) => {
      cursor.style.transform = `translate(${e.clientX - 16}px, ${e.clientY - 8}px)`;
    });

    // --- Natural bird movement with acceleration + friction ---
    let birdX = Math.round(window.innerWidth * 0.6);
    let birdY = Math.round(window.innerHeight * 0.5);
    let vx = 0, vy = 0;           // velocity
    const accel = 1.2;            // acceleration per frame when key held
    const maxSpeed = 12;          // clamp top speed
    const friction = 0.90;        // slow down when no input
    const birdSize = 40;

    // World sliding (eased) when pushing right edge
    let offsetX = 0;              // current world offset
    let targetOffsetX = 0;        // target world offset (we ease toward this)
    const slideSpeed = 14;        // how much target moves per push

    const keys = { ArrowUp:false, ArrowDown:false, ArrowLeft:false, ArrowRight:false };
    addEventListener('keydown', (e) => { if (e.key in keys) { keys[e.key] = true; e.preventDefault(); } }, {passive:false});
    addEventListener('keyup',   (e) => { if (e.key in keys) keys[e.key] = false; });

    function clamp(v,min,max){ return v<min?min:v>max?max:v; }

    function physics(){
      // accelerate
      if (keys.ArrowLeft)  vx -= accel;
      if (keys.ArrowRight) vx += accel;
      if (keys.ArrowUp)    vy -= accel;
      if (keys.ArrowDown)  vy += accel;

      // friction
      vx *= friction; vy *= friction;

      // clamp speed
      const speed = Math.hypot(vx, vy);
      if (speed > maxSpeed){ const s = maxSpeed / speed; vx *= s; vy *= s; }

      // integrate
      birdX += vx; birdY += vy;

      // bounds (before world slide)
      const rightEdge = window.innerWidth - birdSize;
      if (birdX < 0){ birdX = 0; vx = 0; }
      if (birdX > rightEdge){ birdX = rightEdge; if (keys.ArrowRight){ targetOffsetX = Math.min(window.innerWidth, targetOffsetX + slideSpeed); } }
      if (birdY < 0){ birdY = 0; vy = 0; }
      if (birdY > window.innerHeight - birdSize){ birdY = window.innerHeight - birdSize; vy = 0; }

      // ease world toward target offset
      offsetX += (targetOffsetX - offsetX) * 0.08;

      // apply transforms
      bird.style.transform = `translate(${birdX}px, ${birdY}px)`;
      world.style.transform = `translateX(${-offsetX}px)`;

      // toggle nav slide-away
      if (offsetX > 8) document.body.classList.add('reveal');
      else document.body.classList.remove('reveal');

      requestAnimationFrame(physics);
    }

    // init
    bird.style.transform = `translate(${birdX}px, ${birdY}px)`;
    requestAnimationFrame(physics);

    // Build orbiting birds with varied radii/speeds
    function buildSwarm(count=64){
      swarm.innerHTML='';
      for(let i=0;i<count;i++){
        const o = document.createElement('div');
        o.className = 'orbit';
        o.style.animationDuration = (38 + Math.random()*62) + 's'; // slower, natural
        o.style.transform = `rotate(${Math.random()*360}deg)`;
        const d = document.createElement('div');
        d.className = Math.random() < 0.7 ? 'dot' : 'tri';
        const r = 70 + Math.random()*90; // radius from center
        d.style.setProperty('--r', r + 'px');
        o.appendChild(d);
        swarm.appendChild(o);
      }
    }
    buildSwarm(72);

    // Click anywhere on hidden page to close
    document.querySelector('.hidden-page').addEventListener('click', () => {
      targetOffsetX = 0; // ease back
    });

    // Resize handling
    addEventListener('resize', () => {
      birdX = clamp(birdX, 0, window.innerWidth - birdSize);
      birdY = clamp(birdY, 0, window.innerHeight - birdSize);
    });

    // Fallback if bird.png missing
    bird.onerror = () => {
      bird.style.background = 'white';
      bird.style.clipPath = 'polygon(0% 100%, 50% 0%, 100% 100%)';
      bird.removeAttribute('src');
    };
  </script>
</body>
</html>
